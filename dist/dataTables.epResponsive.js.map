{"version":3,"sources":["../src/dataTables.epResponsive.js"],"names":[],"mappings":"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","file":"dataTables.epResponsive.js","sourcesContent":["/**------------------------------\n * epResponsive DataTables Plugin\n * ------------------------------\n * Feature Letter: R\n *\n */\nimport $ from 'jquery';\nimport 'datatables';\n\t(function(window, document, $, undefined) {\n\n\t\tvar resizeCallback,\n\t\t\tresponsiveOptions,\n\t\t\tignoreColumns;\n\n\t\t$.fn.dataTable.epResponsive = function ( inst ) {\n\t\t\tvar api = new $.fn.dataTable.Api( inst );\n\t\t\tvar settings = api.settings()[0];\n\t\t\tvar columns = settings.oInit.columns;\n\t\t\tvar CELL_FONT_SIZE = Number($(api.table().body()).css(\"font-size\").match(/(\\d+)*/)[0]);\n\t\t\tvar ERROR_PREFIX = \"epResponsive (\" + settings.sTableId + \"): \";\n\t\t\tvar errorLogged = false;\n\t\t\tvar that = this;\n\n\t\t\tignoreColumns = columns.map(function() {\n\t\t\t\treturn false;\n\t\t\t})\n\n\t\t\tif(settings.oFeatures.bAutoWidth) {\n\t\t\t\tconsole.error(ERROR_PREFIX + \"Auto Width should be disabled.\")\n\t\t\t}\n\n\t\t\t// use default font size of 14px\n\t\t\tif(CELL_FONT_SIZE === 0) {\n\t\t\t\tCELL_FONT_SIZE = 14;\n\t\t\t}\n\n\t\t\t// parses width string to number. width can be provided in em, % or px\n\t\t\tthis._parse_width = function (widthString) {\n\t\t\t\tvar match = widthString.match(/(^[0-9]+)(.*$)/);\n\t\t\t\tif(match[2] === \"em\") {\n\t\t\t\t\treturn Number(match[1]) * CELL_FONT_SIZE;\n\t\t\t\t} else if(match[2] === \"%\") {\n\t\t\t\t\treturn Math.round(Number(match[1]) / 100 * CELL_FONT_SIZE);\n\t\t\t\t} else if(match[2] === \"px\") {\n\t\t\t\t\treturn Number(match[1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// calculates the initial value for total width.\n\t\t\t// this is equal to the summation of the widths of fixed columns\n\t\t\tthis._init_total_width = function () {\n\t\t\t\tvar totalWidth = 0;\n\t\t\t\tcolumns.forEach( function (column) {\n\t\t\t\t\tif(column.fixed) {\n\t\t\t\t\t\ttotalWidth += that._parse_width(column.width);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn totalWidth;\n\t\t\t}\n\n\t\t\t// sets the visibility of the column in datatables and in the metadata to the given value\n\t\t\tthis._set_column_visibility = function(idx, visible) {\n\t\t\t\tif(idx < columns.length) {\n\t\t\t\t\tapi.column(idx).visible(visible, false); // disable redraw for performance\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// hides columns that cannot fit within the table container's width\n\t\t\tthis._resize_cols = function () {\n\t\t\t\tvar totalWidth = that._init_total_width();\n\t\t\t\tvar tableWidth = $(api.table().container()).width();\n\t\t\t\tvar visibilityChanged = false;\n\t\t\t\tvar hiddenColumns = [];\n\t\t\t\tvar fixedColumnsOverflow = totalWidth - tableWidth;\n\n\t\t\t\tfor(var i = 0; i < columns.length; i++) {\n\t\t\t\t\tif(!ignoreColumns[i]) {\n\t\t\t\t\t\tif(!columns[i].fixed) {\n\t\t\t\t\t\t\tif(columns[i].width) {\n\t\t\t\t\t\t\t\ttotalWidth += that._parse_width(columns[i].width);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttotalWidth += CELL_FONT_SIZE;\n\t\t\t\t\t\t\t\tif(!errorLogged) {\n\t\t\t\t\t\t\t\t\tconsole.error(ERROR_PREFIX + \"Column #\" + i + \" should have width property. Using default of 1em.\");\n\t\t\t\t\t\t\t\t\terrorLogged = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(totalWidth < tableWidth || columns[i].fixed) {\n\t\t\t\t\t\t\tif(api.column(i).visible() !== true) {\n\t\t\t\t\t\t\t\tvisibilityChanged = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthat._set_column_visibility(i, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(api.column(i).visible() !== false) {\n\t\t\t\t\t\t\t\tvisibilityChanged = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthat._set_column_visibility(i, false);\n\t\t\t\t\t\t\thiddenColumns.push(columns[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// hide fixed columns if needed\n\t\t\t\tfor(var i = columns.length - 1; i >= 0 && fixedColumnsOverflow > 0; i--) {\n\t\t\t\t\tif(!ignoreColumns[i] && columns[i].fixed) {\n\t\t\t\t\t\tif(api.column(i).visible() !== false) {\n\t\t\t\t\t\t\tvisibilityChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat._set_column_visibility(i, false);\n\t\t\t\t\t\thiddenColumns.push(columns[i]);\n\t\t\t\t\t\tfixedColumnsOverflow -= that._parse_width(columns[i].width);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// hide columns that should be hidden when all columns are being shown\n\t\t\t\tif(hiddenColumns.length === 0) {\n\t\t\t\t\tif(Array.isArray(responsiveOptions.hideWhenAllColumnsAreVisible)) {\n\t\t\t\t\t\tresponsiveOptions.hideWhenAllColumnsAreVisible.forEach(function (col) {\n\t\t\t\t\t\t\tthat._set_column_visibility(col, false);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// perform redraw now\n\t\t\t\tapi.columns.adjust().draw( false );\n\n\t\t\t\t// only call resize callbacks if visibility actually changed\n\t\t\t\tif(visibilityChanged) {\n\t\t\t\t\tresizeCallback(hiddenColumns);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// resize columns on window resize\n\t\t\t$(window).on(\"resize.epR\", function () {\n\t\t\t\tthat._resize_cols();\n\t\t\t});\n\n\t\t\t// resize columns on table init\n\t\t\tapi.on(\"init.dt\", function () {\n\n\t\t\t\t//push this to the end of the stack\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tthat._resize_cols();\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t\t// clean up on table destroy\n\t\t\tapi.on(\"destroy.dt\", function () {\n\t\t\t\t$(window).off(\"resize.epR\");\n\t\t\t\tresizeCallback = null;\n\t\t\t});\n\n\t\t\tif (settings._responsive ) {\n\t\t\t\tthrow \"Responsive already initialised on table \" + settings.nTable.id;\n\t\t\t}\n\n\t\t\tsettings._responsive = this;\n\t\t};\n\n\t\t// Subscribe the feature plug-in to DataTables, ready for use\n\t\t$.fn.dataTable.ext.feature.push( {\n\t\t\t\"fnInit\": function( settings ) {\n\t\t\t\tnew $.fn.dataTable.epResponsive( settings );\n\t\t\t},\n\t\t\t\"cFeature\": \"R\",\n\t\t\t\"sFeature\": \"epResponsive\"\n\t\t});\n\n\t\t// Create responsive object on API\n\t\t$.fn.dataTable.Api.register( 'epResponsive()', function () {} );\n\n\t\t// Resize callback registration method.\n\t\t$.fn.dataTable.Api.register( 'epResponsive.onResize()', function ( callback ) {\n\t\t\tresizeCallback = callback;\n\t\t});\n\n\t\t// Set options.\n\t\t$.fn.dataTable.Api.register( 'epResponsive.setOptions()', function ( options ) {\n\t\t\tresponsiveOptions = options;\n\t\t});\n\n\t\t// Set whether epResponsive should ignore the given column when doing calculations.\n\t\t// Use this when you want to manage a column's visibility manually.\n\t\t$.fn.dataTable.Api.register( 'epResponsive.setIgnoreColumn()', function ( index, bIgnore ) {\n\t\t\tif(ignoreColumns && index < ignoreColumns.length) {\n\t\t\t\tignoreColumns[index] = bIgnore;\n\t\t\t}\n\t\t});\n\t})(window, document, $)\n"]}